<Window x:Class="UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:UI"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:converters="clr-namespace:UI.Converters"
        xmlns:mainWindow="clr-namespace:Core.ViewModels.MainWindow;assembly=Core"
        xmlns:applicationViewModel="clr-namespace:Core.ViewModels.Application;assembly=Core"
        mc:Ignorable="d"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}"
        MinHeight="800" MinWidth="1000" Closed="CleanupApplication" Loaded="OnMainWindowLoaded"
        Title="CYGIA ALC-906" >

    <!-- Key bindings -->
    <Window.InputBindings>
        <KeyBinding Key="F1" Command="{Binding SwitchHomePageCommand}"/>
        <KeyBinding Key="F2" Command="{Binding SwitchCameraHostPageCommand}"/>
        <KeyBinding Key="F3" Command="{Binding SwitchLineScanHostPageCommand}"/>
        <KeyBinding Key="F4" Command="{Binding SwitchServerPageCommand}"/>
    </Window.InputBindings>
    
    <Border Margin="5">
        <DockPanel>
            <!-- ToolBar -->
            <ToolBarTray Orientation="Vertical" DockPanel.Dock="Left">
           
                <ToolBar>
                    <Button Command="{Binding SwitchHomePageCommand}">
                        <materialDesign:PackIcon Kind="Home" ToolTip="Home Page" />
                    </Button>
                    <Separator />
                    <Button Command="{Binding SwitchCameraHostPageCommand}">
                        <materialDesign:PackIcon Kind="PhotoCamera" ToolTip="2D Measurements" />
                    </Button>
                    <Button Command="{Binding SwitchLineScanHostPageCommand}">
                        <materialDesign:PackIcon Kind="Printer3d" ToolTip="3D Measurements" />
                    </Button>
                    <Separator />
                    <Button Command="{Binding SwitchServerPageCommand}">
                        <materialDesign:PackIcon Kind="Server" ToolTip="PLC Communications" />
                    </Button>
                </ToolBar>
            </ToolBarTray>
            
            <!-- Plc controller -->
            <ToolBarTray DockPanel.Dock="Top">
                <ToolBar>
                    <!-- Plc init button -->
                    <Button
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        materialDesign:ButtonProgressAssist.Value="-1"
                        materialDesign:ButtonProgressAssist.IsIndicatorVisible="True"
                        materialDesign:ButtonProgressAssist.IsIndeterminate="{Binding Source={x:Static applicationViewModel:ApplicationViewModel.Instance}, Path=Server.IsBusyResetting}"
                        Content="Reset" Command="{Binding  Source={x:Static applicationViewModel:ApplicationViewModel.Instance}, Path=Server.InitCommand}"
                        Margin="2,0" />
                    <!-- auto-run start/stop toggle -->
                    <ToggleButton
                        Style="{StaticResource MaterialDesignSwitchAccentToggleButton}"
                        IsChecked="{Binding Source={x:Static applicationViewModel:ApplicationViewModel.Instance}, Path=Server.IsAutoRunning}"
                        IsEnabled="{Binding Source={x:Static applicationViewModel:ApplicationViewModel.Instance}, Path=Server.PlcReady}" />
                    
                </ToolBar>
            </ToolBarTray>
            
            <Grid>
                <!-- Snack bar -->
                <materialDesign:Snackbar VerticalAlignment="Top" HorizontalAlignment="Center" MessageQueue="{Binding MessageQueue, Source={x:Static applicationViewModel:ApplicationViewModel.Instance}}"/>
                
                <!-- Pages here -->
                <ContentControl Content="{Binding CurrentApplicationPage, Source={x:Static applicationViewModel:ApplicationViewModel.Instance}, Converter={converters:EnumToApplicationPageConverter}}"/>
            </Grid>


        </DockPanel>
    </Border>
</Window>